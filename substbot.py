#!/usr/bin/env python3
# -*- coding: utf-8 -*-
#
#	   substbot.py
#	   
#	   (C) 2011-2024 Alchimista <alchimistawp@gmail.com>
# 		
#		Distributed under the terms of the GNU GPL license.
# 
# TODO: make '=\' also work
#		
# import sys
# sys.path.append('/home/alchimista/wp/bots/pywikipedia')

import pywikibot
from pywikibot import pagegenerators
import re
import cProfile

predefs = [u'A', u'1WR', u'Aeroportos do Brasil/Convite', u'Afd', u'\xc1lbuns/Convite', u'Amor', u'Anf\xedbios e r\xe9pteis/Convite', u'Anf\xedbios/Convite', u'Angola/Convite', u'Animang\xe1/Convite', u'Anjo', u'Apagar', u'Aplauso', u'Apoio', u'Apontadores', u'Apontadores Externos', u'Apontadores externos', u'Aprovo', u'Arte/Convite', u'Artigos relacionados', u'Artigos Relacionados', u'Artr\xf3podes/Convite', u'\xc1sia/Convite', u'Assinatura n\xe3o permitida', u'Assine', u'Assobiar', u'Assuntos relacionados', u'Atalhos externos', u'Atl\xe9tico Mineiro/Convite', u'Autobiografia', u'Av', u'Av-as', u'AV-AS', u'Av-AS', u'Av-assin-er', u'Av-assinatura', u'Av-blog', u'Av-boas vindas', u'Av-branqueio', u'Av-bv', u'Av-cat', u'AV-CAT', u'Av-categoria', u'Av-cdi', u'Av-check', u'Av-cite', u'Av-COI', u'Av-coi', u'Av-conflito de interesse', u'Av-copia', u'Av-c\xf3pia', u'Av-data', u'Av-elenco-novela', u'Av-er', u'Av-fonte', u'Av-f\xf3rum', u'Av-interwiki', u'Av-iw', u'Av-justificar', u'Av-layout', u'Av-le', u'Av-liga\xe7\xf5es internas', u'Av-linguagem', u'Av-linguagem incorreta', u'Av-matrad', u'Av-mostrar previs\xe3o', u'Av-namespace', u'Av-n\xe3o apague', u'Av-n\xe3o copie', u'Av-n\xe3o elimine', u'Av-n\xe3o remova', u'Av-n\xe3o responda', u'Av-novapredef', u'Av-obs', u'Av-observa\xe7\xe3o', u'Av-orkut', u'Av-ortografia', u'Av-p', u'Av-P', u'Av-p\xe1gina de usu\xe1rio', u'Av-p\xe1gina pessoal', u'Av-PE-novato', u'Av-prev', u'Av-prev1', u'Av-previs\xe3o', u'Av-propaganda', u'Av-pub', u'Av-RAD', u'Av-Remo\xe7\xe3o', u'Av-remo\xe7\xe3o', u'Av-retirar conte\xfado', u'Av-retiraraviso', u'Av-retirarconte\xfado', u'Av-rev', u'Av-revalid', u'Av-revalida\xe7\xe3o', u'Av-revers\xe3o', u'Av-revertida', u'Av-Spam', u'Av-spam', u'Av-ss', u'Av-subst', u'Av-substitui\xe7\xe3o', u'Av-test', u'Av-teste', u'Av-VDA', u'Av-wikilinks', u'Av-wkf', u'Av/us', u'Av1', u'Av2', u'Ava\xed/Convite', u'Avermelhar', u'Aves/Convite', u'Avia\xe7\xe3o/Convite', u'Aviso', u'Aviso categoria', u'Aviso-animal', u'Aviso-assinatura', u'Aviso-assinatura n\xe3o permitida', u'Aviso-assinatura-ER', u'Aviso-ban1', u'Aviso-ban2', u'Aviso-ban3', u'Aviso-banEP1', u'Aviso-banEP2', u'Aviso-biografia', u'Aviso-blog', u'Aviso-bloqueado-conta impr\xf3pria', u'Aviso-boas vindas', u'Aviso-bpv1', u'Aviso-bpv2', u'Aviso-bpv3', u'Aviso-bpv4', u'Aviso-branqueio', u'Aviso-bv', u'Aviso-categoria', u'Aviso-cite fonte', u'Aviso-civilidade', u'Aviso-conflito de interesse', u'Aviso-conflito de interesses', u'Aviso-c\xf3pia', u'Aviso-cria\xe7\xe3o', u'Aviso-data', u'Aviso-elenco-novela', u'Aviso-ER', u'Aviso-ER-ficheiro', u'Aviso-filtro', u'Aviso-fonte', u'Aviso-interwiki', u'Aviso-justificar', u'Aviso-layout', u'Aviso-liga\xe7\xf5es internas', u'Aviso-linguagem', u'Aviso-linguagem incorreta', u'Aviso-mostrar previs\xe3o', u'Aviso-namespace', u'Aviso-n\xe3o apague', u'Aviso-n\xe3o copie', u'Aviso-n\xe3o elimine', u'Aviso-n\xe3o remova', u'Aviso-n\xe3o responda', u'Aviso-novapredef', u'Aviso-observa\xe7\xe3o', u'Aviso-orkut', u'Aviso-ortografia', u'Aviso-P', u'Aviso-p', u'Aviso-p\xe1gina de usu\xe1rio', u'Aviso-p\xe1gina pessoal', u'Aviso-PE-novato', u'Aviso-prev1', u'Aviso-previs\xe3o', u'Aviso-propaganda', u'Aviso-RAD', u'Aviso-Remo\xe7\xe3o', u'Aviso-retirar conte\xfado', u'Aviso-retiraraviso', u'Aviso-retirarconte\xfado', u'Aviso-rev', u'Aviso-revalid', u'Aviso-revalida\xe7\xe3o', u'Aviso-revers\xe3o', u'Aviso-revertida', u'Aviso-subst', u'Aviso-substitui\xe7\xe3o', u'Aviso-suspeito', u'Aviso-teste', u'Aviso-vandalismo', u'Aviso-wikilinks', u'Aviso/P\xe1gina Pessoal', u'Aviso/P\xe1gina pessoal', u'Aviso1', u'Aviso2', u'Avisocategoria', u'Azul', u'B)', u'Banda Desenhada/Convite', u'Bandas/Convite', u'BASEPAGENAME', u'Basquetebol/Convite', u'BD', u'BD/Boas vindas', u'BD/Boas-vindas', u'BD/Convite', u'Beijo', u'Bem vinda', u'Bem vindo', u'Bem vindo ao projecto', u'Bem vindo ip', u'Bem vindo man', u'Bem-vinda', u'Bem-vindo', u'Bem-vindo ao projecto', u'Bem-vindo IP', u'Bem-vindo ip', u'Bem-vindo(a)', u'Bibliografia', u'Biografias/Convite', u'Biologia/Convite', u'Bioqu\xedmica/Convite', u'Bloqueado', u'Bloqueado-CPV', u'Bloqueado-disc', u'Blues/Convite', u'Boas vindas', u'Boas-vindas', u'Bom dia', u'Bord\xf4', u'Bossa Nova/Convite', u'Branco', u'Branqueio', u'Brasil/Convite', u'BSRE', u'Budismo/Convite', u'Bv', u'BV', u'Bv ip', u'Bv-av', u'BV-AV', u'Bv-av (Registrado)', u'Bv-av-reg', u'Bv-av-registado', u'Bv-av-registrado', u'Bv-avr', u'Bv-ip', u'Bv-propaganda', u'Bv-tutoria', u'Bva', u'Bvip', u'Calado', u'Cancelada', u'Carnaval/Convite', u'Cart\xe3o de anivers\xe1rio/amarelo', u'Cart\xe3o de anivers\xe1rio/azul', u'Cart\xe3o de anivers\xe1rio/branco', u'Cart\xe3o de anivers\xe1rio/laranja', u'Cart\xe3o de anivers\xe1rio/rosa', u'Cart\xe3o de anivers\xe1rio/verde', u'Cart\xe3o de anivers\xe1rio/vermelho', u'Cart\xe3o de anivers\xe1rio/violeta', u'Cartoon Network/Convite', u'Catolicismo convite', u'Catolicismo/Convite', u'Cdi', u'Choro', u'Chr', u'Ciclismo/Convite', u'Ci\xeancia da Computa\xe7\xe3o/Convite', u'Ci\xeancia/Convite', u'Cif', u'Cinema/Convite', u'Cinza', u'Cita\xe7\xe3o', u'Cite', u'CITE', u'Cite fonte', u'Click', u'Concordo', u'Convite ceticismo', u'Convite destaque', u'Convite vdl', u'Convite wikiclube', u'Convite WikiProjeto Atl\xe9tico Mineiro', u'Convite WikiProjeto Ava\xed', u'Convite WikiProjeto Corinthians', u'Convite WPAmb', u'Convite_destaque', u'Convite-Ambiente', u'Convite-antropologia', u'Convite-artes marciais', u'Convite-astronomia', u'Convite-Automobilismo', u'Convite-autorrevisor', u'Convite-Autorrevisor', u'Convite-aves', u'Convite-biologia', u'Convite-biologia celular', u'Convite-bioqu\xedmica', u'Convite-cantatasbach', u'Convite-capitais', u'Convite-carnaval', u'Convite-cidades', u'Convite-cinema', u'Convite-desporto', u'Convite-direito', u'Convite-dramaturgia', u'Convite-eliminador', u'Convite-entretenimento', u'Convite-F1', u'Convite-filosofia', u'Convite-filosofia/info', u'Convite-f\xedsica', u'Convite-Galizaplus', u'Convite-Goiana', u'Convite-Goi\xe2nia', u'Convite-grandelisboa', u'Convite-HAP', u'Convite-hist\xf3ria', u'Convite-Lost', u'Convite-Madeira', u'Convite-matem\xe1tica', u'Convite-maw', u'Convite-medicina', u'Convite-m\xfasica', u'Convite-pa\xedses', u'Convite-plantas', u'Convite-portal-anarquia', u'Convite-Portal:Anarquia', u'Convite-qu\xedmica', u'Convite-r\xe1dio', u'Convite-reversor', u'Convite-sa\xfade', u'Convite-s\xe9ries', u'Convite-teologia', u'Convite-tutoria', u'Convite-TV', u'Convite-wikigeografia', u'Convite-WikiRio', u'Convite-WikiSampa', u'Convite/Animang\xe1', u'Convitexadrez', u'Cool', u'C\xf3pia', u'Cor pink', u'Core', u'Corinthians/Convite', u'CP', u'CQD', u'Criar P', u'Cultura livre/Convite', u'CWpPa', u'Desaprovo', u'Digimon/Convite', u'Direito ao voto', u'Direito de voto', u'Direito/Convite', u'Direitos animais/Convite', u'Direitos animais/convite', u'Direitos animais/Convite interesse', u'Direitos animais/convite interesse', u'Discordo', u'Discuss\xe3o de bloqueio', u'Doente', u'Dourado', u'Eca', u'Economia/Convite', u'Elos externos', u'Embara\xe7ado', u'Enlace externo', u'Enlaces externos', u'ESR', u'Esr', u'ESR-banda', u'Esr-banda', u'ESR-bio', u'Esr-bio', u'ESR-bsre', u'Esr-empresa', u'ESR-empresa', u'ESR-organiza\xe7\xe3o', u'Estilo padr\xe3o de mensagens', u'Estilo padr\xe3o de mensagens (azul)', u'Estilo padr\xe3o de mensagens (vermelho)', u'Eurovis\xe3o/Convite', u'F-de', u'F.C.Porto/Convite', u'F1/Convite', u'Feito', u'Feliz anivers\xe1rio', u'Ferrovip\xe9dia/Convite', u'Fim compacta\xe7\xe3o', u'Fim_destaque', u'Fim-tutoria', u'Fonte', u'For\xe7as Armadas/Convite', u'F\xf3rmula 1/Convite', u'Futebol/Convite', u'Games/Convite', u'GE', u'Geografia/Convite', u'Gin\xe1stica/Convite', u'Goi\xe2nia/Convite', u'Gospel/Convite', u'Grr', u'Guerras M\xe9dicas/Convite', u'Guitarra/Convite', u'HA', u'Hein?', u'Hip hop/Convite', u'Hist\xf3ria militar/Convite', u'Hist\xf3ria/Convite', u'Hum', u'I GP Wikimedia Brasil/Convite', u'I*', u'Icon', u'Infobox VG', u'Infobox video game', u'Informar', u'In\xedcio compacta\xe7\xe3o', u'In\xedcio_destaque', u'Int', u'Integra\xe7\xe3o', u'Invertebrados/Convite', u'I\xba WikiRio', u'IW', u'Jap\xe3o/Convite', u'Jazz/Convite', u'Jornalismo/Convite', u'Justificar', u'L\xe2mpada', u'Laranja', u'Le', u'LE', u'LEsp/con', u'LEsp/Convite', u'Level Up!/Convite', u'LGBT Convite', u'Lig-ext', u'Liga\xe7\xe3o exterior', u'Liga\xe7\xe3o externa', u'Liga\xe7\xe3o Externa', u'Liga\xe7\xf5es exteriores', u'Liga\xe7\xf5es externas', u'Liga\xe7\xf5es Externas', u'Liga\xe7\xf5es Internas', u'Liga\xe7\xf5es internas', u'Liga\xe7\xf5es para o exterior', u'Lil\xe1s', u'L\xedngua fora', u'Linguagem Incorreta', u'Linguagem incorreta', u'Link externo', u'Links', u'Links exteriores', u'Links Externos', u'Links externos', u'Links internos', u'Links Internos', u'Links para o exterior', u'Links relacionados', u'Linque externo', u'Literatura/Convite', u'Lmf', u'Lol', u'Lost/Convite', u'LX', u'Maligno', u'Mam\xedferos/Convite', u'Marrom', u'Matrad', u'Mensagem de boas-vindas', u'Mensagem de boas-vindas-IP', u'Metal/Convite', u'MMO/Convite', u'Monarquia/Convite', u'Morder', u'Mostrar previs\xe3o', u'Mostrar Previs\xe3o', u'Mtag', u'Mudan\xe7a de grafia', u'Muito bom', u'M\xfasica portuguesa/Convite', u'M\xfasica/Convite', u'N', u'N\xe3o', u'N\xe3o apague', u'N\xe3o apoio', u'N\xe3o assinado', u'N\xe3o assine', u'N\xe3o assino', u'N\xe3o assinou2', u'N\xe3o assinou3', u'N\xc3O COPIE', u'N\xe3o copie', u'N\xe3o \xe9 um f\xf3rum', u'N\xe3o elimine', u'N\xe3o ofenda', u'N\xe3o remova', u'N\xe3o responda', u'N\xe3oassino', u'Nata\xe7\xe3o/Convite', u'Naval', u'Naval/Convite', u'Nervoso', u'Neutral', u'Neutro', u'Nordeste/Convite', u'Nota-subst', u'Novapredef', u'Novo administrador', u'Novo autorrevisor', u'Novo burocrata', u'Novo eliminador', u'Novo reversor', u'NovoAdmin', u'NovoAutorrevisor', u'NovoReversor', u'NovosAdmin', u'NovoSysop', u'Obrigado', u'Obrigado2', u'Observa\xe7\xe3o', u'Oi!', u'Olhos', u'Orgulho', u'Ort', u'ORT', u'Ortografia', u'Pab', u'Padroniza\xe7\xe3o/Convite', u'PAGENAME', u'P\xe1gina Externa', u'P\xe1gina externa', u'P\xe1ginas da Internet', u'P\xe1ginas externas', u'P\xe1ginas Externas', u'P\xe1ginas relacionadas', u'Patrim\xf3nio Mundial da UNESCO/Convite', u'Pdel', u'PE-privacidade', u'Peixes/Convite', u'Pendlg', u'Pisca', u'Piscada', u'Plantas/Convite', u'Pok\xe9mon/Convite', u'Portais/Convite', u'Preto', u'Prev', u'Prev2', u'Prever', u'Previs\xe3o', u'Prod', u'Prop', u'Propaganda', u'Qu\xedmica/Convite', u'R&B/Convite', u'Realeza e Nobreza/Convite', u'Recursos exteriores \xe0 Wikip\xe9dia', u'Refer\xeancia externa', u'Refer\xeancias externas', u'Refer\xeancias Externas', u'Rela\xe7\xf5es internacionais/Convite', u'Remo\xe7\xe3o', u'R\xe9pteis/Convite', u'Retiraraviso', u'Retirarconte\xfado', u'Revertida', u'Rock/Convite', u'Rosa', u'Roxo', u'S', u'S-cat', u'S=', u'Salvamento sucessivo', u'Segunda Guerra Mundial/Convite', u'S\xe9ries/Convite', u'Sim', u'Simpsons/Convite', u'Sites', u'S\xedtios', u'Skate/Convite', u'Sorriso', u'Subst', u'Substitui\xe7\xe3o', u'Suspeito', u'Susto', u'T+', u'Televis\xe3o/Convite', u'T\xeanis/Convite', u'Teologia/Convite', u'T\xf3picos relacionados', u'Tradu\xe7\xe3o/Convite', u'Travesso', u'Triste', u'Turquesa', u'Tutoria/Convite', u'Ups', u'User-uaa', u'Usu\xe1rio:Kim richard/Stats', u'Usu\xe1rio:Salebot/Aviso erro', u'Usu\xe1rio:Salebot/Aviso recria\xe7\xe3o', u'Usu\xe1rio:Salebot/Aviso vandalismo', u'Usu\xe1rio(a):Kascyo/Novo administrador', u'Usurpa\xe7\xe3o requerida', u'Vandalismo', u'VDA', u'Vda', u'Veja mais', u'Veja tamb\xe9m', u'Veja Tamb\xe9m', u'Ver tambem', u'Ver tamb\xe9m', u'Ver Tamb\xe9m', u'Verde', u'Vergonha', u'Vermelho', u'Vide tamb\xe9m', u'V\xednculos externos', u'Voto', u'Weblinks', u'Welcome', u'Wikiactividade/bronze', u'Wikiactividade/extra', u'Wikiactividade/m\xe9rito', u'Wikiactividade/ouro', u'Wikiactividade/prata', u'Wikiatividade/bronze', u'Wikiatividade/extra', u'Wikiatividade/m\xe9rito', u'Wikiatividade/ouro', u'Wikiatividade/prata', u'Wikip\xe9dia:Lista de leituras para administradores', u'Wikip\xe9dia:Projetos/Acordo ortogr\xe1fico/Facilitar/Predefini\xe7\xe3o:Ortografia', u'Wikip\xe9dia:Projetos/For\xe7as Armadas/Convite', u'Wikip\xe9dia:Projetos/Hist\xf3ria militar/Convite', u'Wikip\xe9dia:Projetos/M\xfasica/Convite', u'Wikip\xe9dia:Projetos/Patrim\xf3nio Mundial da UNESCO/Convite', u'Wikipedia/CA/Aviso envolvido', u'Wma', u'Wmfx', u'Wmv', u'Wmw', u'Wmw1', u'Wmwb', u'Wmwc', u'Wmwl', u'Wmwm', u'Wmwp', u'Wmwrx', u'Wmws', u'Wrestling/Convite', u'Wrestling/Inativo', u'X', u'Xadrez/Convite', u'XD', u'XP', u'ZZ', u'N\xe3o assinou', u'N\xe3oassinou', '!!!', u'!+', u'((:', u'(:', u'):', u')\xb4:', u')I', u',(', u';)', u';/', u';D', u'?', u'???', u'^..^', u'^^', u'^o^', u'~', u'+', u'=$', u'=(', u'=)', u'=/', u'=?', u'=@', '=+', '=D', '=E', '=L', '=O', '=P', '=S2', '=x', '=Y', u'0O', u'3)', u'8', u'8)', u'80', u'8D', u'8U']
#predefs = [u""A"", u""1WR"", u""Aeroportos do Brasil/Convite"", u""Afd"", u""Álbuns/Convite"", u""Amor"", u""Anfíbios e répteis/Convite"", u""Anfíbios/Convite"", u""Angola/Convite"", u""Animangá/Convite"", u""Anjo"", u""Apagar"", u""Aplauso"", u""Apoio"", u""Apontadores"", u""Apontadores Externos"", u""Apontadores externos"", u""Aprovo"", u""Arte/Convite"", u""Artigos relacionados"", u""Artigos Relacionados"", u""Artrópodes/Convite"", u""Ásia/Convite"", u""Assinatura não permitida"", u""Assine"", u""Assobiar"", u""Assuntos relacionados"", u""Atalhos externos"", u""Atlético Mineiro/Convite"", u""Autobiografia"", u""Av"", u""Av-as"", u""AV-AS"", u""Av-AS"", u""Av-assin-er"", u""Av-assinatura"", u""Av-blog"", u""Av-boas vindas"", u""Av-branqueio"", u""Av-bv"", u""Av-cat"", u""AV-CAT"", u""Av-categoria"", u""Av-cdi"", u""Av-check"", u""Av-cite"", u""Av-COI"", u""Av-coi"", u""Av-conflito de interesse"", u""Av-copia"", u""Av-cópia"", u""Av-data"", u""Av-elenco-novela"", u""Av-er"", u""Av-fonte"", u""Av-fórum"", u""Av-interwiki"", u""Av-iw"", u""Av-justificar"", u""Av-layout"", u""Av-le"", u""Av-ligações internas"", u""Av-linguagem"", u""Av-linguagem incorreta"", u""Av-matrad"", u""Av-mostrar previsão"", u""Av-namespace"", u""Av-não apague"", u""Av-não copie"", u""Av-não elimine"", u""Av-não remova"", u""Av-não responda"", u""Av-novapredef"", u""Av-obs"", u""Av-observação"", u""Av-orkut"", u""Av-ortografia"", u""Av-P"", u""Av-página de usuário"", u""Av-página pessoal"", u""Av-PE-novato"", u""Av-prev"", u""Av-prev1"", u""Av-previsão"", u""Av-propaganda"", u""Av-pub"", u""Av-RAD"", u""Av-Remoção"", u""Av-remoção"", u""Av-retirar conteúdo"", u""Av-retiraraviso"", u""Av-retirarconteúdo"", u""Av-rev"", u""Av-revalid"", u""Av-revalidação"", u""Av-reversão"", u""Av-revertida"", u""Av-Spam"", u""Av-spam"", u""Av-ss"", u""Av-subst"", u""Av-substituição"", u""Av-test"", u""Av-teste"", u""Av-VDA"", u""Av-wikilinks"", u""Av-wkf"", u""Av/us"", u""Av1"", u""Av2"", u""Avaí/Convite"", u""Avermelhar"", u""Aves/Convite"", u""Aviação/Convite"", u""Aviso"", u""Aviso categoria"", u""Aviso-animal"", u""Aviso-assinatura"", u""Aviso-assinatura não permitida"", u""Aviso-assinatura-ER"", u""Aviso-ban1"", u""Aviso-ban2"", u""Aviso-ban3"", u""Aviso-banEP1"", u""Aviso-banEP2"", u""Aviso-biografia"", u""Aviso-blog"", u""Aviso-bloqueado-conta imprópria"", u""Aviso-boas vindas"", u""Aviso-bpv1"", u""Aviso-bpv2"", u""Aviso-bpv3"", u""Aviso-bpv4"", u""Aviso-branqueio"", u""Aviso-bv"", u""Aviso-categoria"", u""Aviso-cite fonte"", u""Aviso-civilidade"", u""Aviso-conflito de interesse"", u""Aviso-conflito de interesses"", u""Aviso-cópia"", u""Aviso-criação"", u""Aviso-data"", u""Aviso-elenco-novela"", u""Aviso-ER"", u""Aviso-ER-ficheiro"", u""Aviso-filtro"", u""Aviso-fonte"", u""Aviso-interwiki"", u""Aviso-justificar"", u""Aviso-layout"", u""Aviso-ligações internas"", u""Aviso-linguagem"", u""Aviso-linguagem incorreta"", u""Aviso-mostrar previsão"", u""Aviso-namespace"", u""Aviso-não apague"", u""Aviso-não copie"", u""Aviso-não elimine"", u""Aviso-não remova"", u""Aviso-não responda"", u""Aviso-novapredef"", u""Aviso-observação"", u""Aviso-orkut"", u""Aviso-ortografia"", u""Aviso-P"", u""Aviso-p"", u""Aviso-página de usuário"", u""Aviso-página pessoal"", u""Aviso-PE-novato"", u""Aviso-prev1"", u""Aviso-previsão"", u""Aviso-propaganda"", u""Aviso-RAD"", u""Aviso-Remoção"", u""Aviso-retirar conteúdo"", u""Aviso-retiraraviso"", u""Aviso-retirarconteúdo"", u""Aviso-rev"", u""Aviso-revalid"", u""Aviso-revalidação"", u""Aviso-reversão"", u""Aviso-revertida"", u""Aviso-subst"", u""Aviso-substituição"", u""Aviso-suspeito"", u""Aviso-teste"", u""Aviso-vandalismo"", u""Aviso-wikilinks"", u""Aviso/Página Pessoal"", u""Aviso/Página pessoal"", u""Aviso1"", u""Aviso2"", u""Avisocategoria"", u""Azul"", u""B)"", u""Banda Desenhada/Convite"", u""Bandas/Convite"", u""BASEPAGENAME"", u""Basquetebol/Convite"", u""BD"", u""BD/Boas vindas"", u""BD/Boas-vindas"", u""BD/Convite"", u""Beijo"", u""Bem vinda"", u""Bem vindo"", u""Bem vindo ao projecto"", u""Bem vindo ip"", u""Bem vindo man"", u""Bem-vinda"", u""Bem-vindo"", u""Bem-vindo ao projecto"", u""Bem-vindo IP"", u""Bem-vindo ip"", u""Bem-vindo(a)"", u""Bibliografia"", u""Biografias/Convite"", u""Biologia/Convite"", u""Bioquímica/Convite"", u""Bloqueado"", u""Bloqueado-CPV"", u""Bloqueado-disc"", u""Blues/Convite"", u""Boas vindas"", u""Boas-vindas"", u""Bom dia"", u""Bordô"", u""Bossa Nova/Convite"", u""Branco"", u""Branqueio"", u""Brasil/Convite"", u""BSRE"", u""Budismo/Convite"", u""Bv"", u""BV"", u""Bv ip"", u""Bv-av"", u""BV-AV"", u""Bv-av (Registrado)"", u""Bv-av-reg"", u""Bv-av-registado"", u""Bv-av-registrado"", u""Bv-avr"", u""Bv-ip"", u""Bv-propaganda"", u""Bv-tutoria"", u""Bva"", u""Bvip"", u""Calado"", u""Cancelada"", u""Carnaval/Convite"", u""Cartão de aniversário/amarelo"", u""Cartão de aniversário/azul"", u""Cartão de aniversário/branco"", u""Cartão de aniversário/laranja"", u""Cartão de aniversário/rosa"", u""Cartão de aniversário/verde"", u""Cartão de aniversário/vermelho"", u""Cartão de aniversário/violeta"", u""Cartoon Network/Convite"", u""Catolicismo convite"", u""Catolicismo/Convite"", u""Cdi"", u""Choro"", u""Chr"", u""Ciclismo/Convite"", u""Ciência da Computação/Convite"", u""Ciência/Convite"", u""Cif"", u""Cinema/Convite"", u""Cinza"", u""Citação"", u""Cite"", u""CITE"", u""Cite fonte"", u""Click"", u""Concordo"", u""Convite ceticismo"", u""Convite destaque"", u""Convite vdl"", u""Convite wikiclube"", u""Convite WikiProjeto Atlético Mineiro"", u""Convite WikiProjeto Avaí"", u""Convite WikiProjeto Corinthians"", u""Convite WPAmb"", u""Convite_destaque"", u""Convite-Ambiente"", u""Convite-antropologia"", u""Convite-artes marciais"", u""Convite-astronomia"", u""Convite-Automobilismo"", u""Convite-autorrevisor"", u""Convite-Autorrevisor"", u""Convite-aves"", u""Convite-biologia"", u""Convite-biologia celular"", u""Convite-bioquímica"", u""Convite-cantatasbach"", u""Convite-capitais"", u""Convite-carnaval"", u""Convite-cidades"", u""Convite-cinema"", u""Convite-desporto"", u""Convite-direito"", u""Convite-dramaturgia"", u""Convite-eliminador"", u""Convite-entretenimento"", u""Convite-F1"", u""Convite-filosofia"", u""Convite-filosofia/info"", u""Convite-física"", u""Convite-Galizaplus"", u""Convite-Goiana"", u""Convite-Goiânia"", u""Convite-grandelisboa"", u""Convite-HAP"", u""Convite-história"", u""Convite-Lost"", u""Convite-Madeira"", u""Convite-matemática"", u""Convite-maw"", u""Convite-medicina"", u""Convite-música"", u""Convite-países"", u""Convite-plantas"", u""Convite-portal-anarquia"", u""Convite-Portal:Anarquia"", u""Convite-química"", u""Convite-rádio"", u""Convite-reversor"", u""Convite-saúde"", u""Convite-séries"", u""Convite-teologia"", u""Convite-tutoria"", u""Convite-TV"", u""Convite-wikigeografia"", u""Convite-WikiRio"", u""Convite-WikiSampa"", u""Convite/Animangá"", u""Convitexadrez"", u""Cool"", u""Cópia"", u""Cor pink"", u""Core"", u""Corinthians/Convite"", u""CP"", u""CQD"", u""Criar P"", u""Cultura livre/Convite"", u""CWpPa"", u""Desaprovo"", u""Digimon/Convite"", u""Direito ao voto"", u""Direito/Convite"", u""Direitos animais/Convite"", u""Direitos animais/convite interesse"", u""Discordo"", u""Discussão de bloqueio"", u""Doente"", u""Dourado"", u""Eca"", u""Economia/Convite"", u""Elos externos"", u""Embaraçado"", u""Enlace externo"", u""Enlaces externos"", u""ESR"", u""ESR-banda"", u""Esr-bio"", u""ESR-bsre"", u""ESR-empresa"", u""ESR-organização"", u""Estilo padrão de mensagens"", u""Estilo padrão de mensagens (azul)"", u""Estilo padrão de mensagens (vermelho)"", u""Eurovisão/Convite"", u""F-de"", u""F.C.Porto/Convite"", u""F1/Convite"", u""Feito"", u""Feliz aniversário"", u""Ferrovipédia/Convite"", u""Fim compactação"", u""Fim_destaque"", u""Fim-tutoria"", u""Fonte"", u""Forças Armadas/Convite"", u""Fórmula 1/Convite"", u""Futebol/Convite"", u""Games/Convite"", u""GE"", u""Geografia/Convite"", u""Ginástica/Convite"", u""Goiânia/Convite"", u""Gospel/Convite"", u""Grr"", u""Guerras Médicas/Convite"", u""Guitarra/Convite"", u""HA"", u""Hein?"", u""Hip hop/Convite"", u""História militar/Convite"", u""História/Convite"", u""Hum"", u""I GP Wikimedia Brasil/Convite"", u""I*"", u""Icon"", u""Infobox VG"", u""Infobox video game"", u""Informar"", u""Início compactação"", u""Início_destaque"", u""Int"", u""Integração"", u""Invertebrados/Convite"", u""Iº WikiRio"", u""IW"", u""Japão/Convite"", u""Jazz/Convite"", u""Jornalismo/Convite"", u""Justificar"", u""Lâmpada"", u""Laranja"", u""Le"", u""LEsp/con"", u""LEsp/Convite"", u""Level Up!/Convite"", u""LGBT Convite"", u""Lig-ext"", u""Ligação exterior"", u""Ligação externa"", u""Ligação Externa"", u""Ligações exteriores"", u""Ligações externas"", u""Ligações Externas"", u""Ligações Internas"", u""Ligações internas"", u""Ligações para o exterior"", u""Lilás"", u""Língua fora"", u""Linguagem Incorreta"", u""Linguagem incorreta"", u""Link externo"", u""Links"", u""Links exteriores"", u""Links Externos"", u""Links Internos"", u""Links para o exterior"", u""Links relacionados"", u""Linque externo"", u""Literatura/Convite"", u""Lmf"", u""Lol"", u""Lost/Convite"", u""LX"", u""Maligno"", u""Mamíferos/Convite"", u""Marrom"", u""Matrad"", u""Mensagem de boas-vindas"", u""Mensagem de boas-vindas-IP"", u""Metal/Convite"", u""MMO/Convite"", u""Monarquia/Convite"", u""Morder"", u""Mostrar previsão"", u""Mostrar Previsão"", u""Mtag"", u""Mudança de grafia"", u""Muito bom"", u""Música portuguesa/Convite"", u""Música/Convite"", u""N"", u""Não"", u""Não apague"", u""Não apoio"", u""Não assinado"", u""Não assine"", u""Não assino"", u""Não assinou2"", u""Não assinou3"", u""NãO COPIE"", u""Não copie"", u""Não é um fórum"", u""Não elimine"", u""Não ofenda"", u""Não remova"", u""Não responda"", u""Nãoassino"", u""Natação/Convite"", u""Naval"", u""Naval/Convite"", u""Nervoso"", u""Neutral"", u""Neutro"", u""Nordeste/Convite"", u""Nota-subst"", u""Novapredef"", u""Novo administrador"", u""Novo autorrevisor"", u""Novo burocrata"", u""Novo eliminador"", u""Novo reversor"", u""NovoAdmin"", u""NovoAutorrevisor"", u""NovoReversor"", u""NovosAdmin"", u""NovoSysop"", u""Obrigado"", u""Obrigado2"", u""Observação"", u""Oi!"", u""Olhos"", u""Orgulho"", u""Ort"", u""ORT"", u""Ortografia"", u""Pab"", u""Padronização/Convite"", u""PAGENAME"", u""Página Externa"", u""Páginas da Internet"", u""Páginas Externas"", u""Páginas relacionadas"", u""Património Mundial da UNESCO/Convite"", u""Pdel"", u""PE-privacidade"", u""Peixes/Convite"", u""Pendlg"", u""Pisca"", u""Piscada"", u""Plantas/Convite"", u""Pokémon/Convite"", u""Portais/Convite"", u""Preto"", u""Prev"", u""Prev2"", u""Prever"", u""Previsão"", u""Prod"", u""Prop"", u""Propaganda"", u""Química/Convite"", u""R&B/Convite"", u""Realeza e Nobreza/Convite"", u""Referência externa"", u""Referências externas"", u""Referências Externas"", u""Relações internacionais/Convite"", u""Remoção"", u""Répteis/Convite"", u""Retiraraviso"", u""Retirarconteúdo"", u""Revertida"", u""Rock/Convite"", u""Rosa"", u""Roxo"", u""S"", u""S-cat"", u""S="", u""Salvamento sucessivo"", u""Segunda Guerra Mundial/Convite"", u""Séries/Convite"", u""Sim"", u""Simpsons/Convite"", u""Sites"", u""Sítios"", u""Skate/Convite"", u""Sorriso"", u""Subst"", u""Substituição"", u""Suspeito"", u""Susto"", u""T+"", u""Televisão/Convite"", u""Tênis/Convite"", u""Teologia/Convite"", u""Tópicos relacionados"", u""Tradução/Convite"", u""Travesso"", u""Triste"", u""Turquesa"", u""Tutoria/Convite"", u""Ups"", u""User-uaa"", u""Usuário:Kim richard/Stats"", u""Usuário:Salebot/Aviso erro"", u""Usuário:Salebot/Aviso recriação"", u""Usuário:Salebot/Aviso vandalismo"", u""Usuário(a):Kascyo/Novo administrador"", u""Usurpação requerida"", u""Vandalismo"", u""VDA"", u""Vda"", u""Veja mais"", u""Veja também"", u""Veja Também"", u""Ver tambem"", u""Ver também"", u""Ver Também"", u""Verde"", u""Vergonha"", u""Vermelho"", u""Vide também"", u""Vínculos externos"", u""Voto"", u""Weblinks"", u""Welcome"", u""Wikiactividade/bronze"", u""Wikiactividade/extra"", u""Wikiactividade/mérito"", u""Wikiactividade/ouro"", u""Wikiactividade/prata"", u""Wikiatividade/bronze"", u""Wikiatividade/extra"", u""Wikiatividade/mérito"", u""Wikiatividade/ouro"", u""Wikiatividade/prata"", u""Wikipédia:Lista de leituras para administradores"", u""Wikipédia:Projetos/Acordo ortográfico/Facilitar/Predefinição:Ortografia"", u""Wikipédia:Projetos/Forças Armadas/Convite"", u""Wikipédia:Projetos/História militar/Convite"", u""Wikipédia:Projetos/Música/Convite"", u""Wikipédia:Projetos/Património Mundial da UNESCO/Convite"", u""Wikipedia/CA/Aviso envolvido"", u""Wma"", u""Wmfx"", u""Wmv"", u""Wmw"", u""Wmw1"", u""Wmwb"", u""Wmwc"", u""Wmwl"", u""Wmwm"", u""Wmwp"", u""Wmwrx"", u""Wmws"", u""Wrestling/Convite"", u""Wrestling/Inativo"", u""X"", u""Xadrez/Convite"", u""XD"", u""XP"", u""ZZ"", u""Não assinou"", u""Nãoassinou"", u""!!!"", u""!+"", u""((:"", u""(:"", u""):"", u"")´:"", u"")I"", u"",("", u"";)"", u"";/"", u"";D"", u""?"", u""???"", u""^..^"", u""^^"", u""^o^"", u""~"", u""+"", u""=$"", u""=("", u""=)"", u""=/"", u""=?"", u""=@"", u""=+"", u""=D"", u""=E"", u""=L"", u""=O"", u""=P"", u""=S2"", u""=x"", u""=Y"", u""0O"", u""3)"", u""8"", u""8)"", u""80"", u""8D"", u""8U"", u""!!!"", u""!+"", u""((:"", u""(:"", u""):"", u"")I"", u"")´:"", u""+"", u"",("", u""3)"", u""8)"", u""8D"", u""8U"", u"";)"", u"";/"", u""=$"", u""=("", u""=)"", u""=+"", u""=?"", u""=@"", u""=D"", u""=E"", u""=L"", u""=O"", u""=P"", u""=S"", u""=Y"", u""=\"", u""=x"", u""???"", u""Alerta"", u""Alerta de sock"", u""Amei"", u""Amor"", u""Anjo"", u""Apoio"", u""Aprovada"", u""Aprovo"", u""Assobiar"", u""Avermelhar"", u""BD"", u""Beijo"", u""Bola de cristal"", u""Bom dia"", u""CP"", u""CQD"", u""Calado"", u""Cancelado"", u""Choro"", u""Concluído"", u""Confirmada"", u""Confirmado"", u""Confirmo"", u""Contra"", u""Core"", u""Corrtks"", u""Curti"", u""Desaprovado"", u""Desaprovo"", u""Desnecessário"", u""Destaquei"", u""Doente"", u""Doeu"", u""Doing"", u""Done"", u""Dormente"", u""Dúvida"", u""Eca"", u""Eliminar"", u""Em análise"", u""Em espera"", u""Em espera2"", u""Em exibição"", u""Em progresso"", u""Embaraçado"", u""Endosso"", u""Extinto"", u""Facepalm"", u""Fne"", u""Fundir"", u""Futuramente"", u""Grr"", u""HA"", u""Hum"", u""I*"", u""IW"", u""Impraticável"", u""Improvável"", u""Inadequado"", u""Inconclusivo"", u""Indicação"", u""Informação2"", u""Já parou"", u""LX"", u""Like"", u""Lmf"", u""Lol"", u""Louco"", u""Lâmpada"", u""Língua fora"", u""Mais info"", u""Maligno"", u""Manter"", u""Mover"", u""Muito bom"", u""Negativo"", u""Nervoso"", u""Neutra"", u""Neutral"", u""Not done"", u""Nota-adm"", u""Não apoio"", u""Não há erro"", u""Não."", u""Não1"", u""Obrigado"", u""Oi!"", u""Olhos"", u""Orgulho"", u""Pacman"", u""Pato"", u""Pendlg"", u""Perfeito"", u""Pergunta"", u""Pesca"", u""Porco"", u""Positivo"", u""Possível"", u""Provável"", u""Quase favorável"", u""Quase feito"", u""Reaberto"", u""Recusado"", u""Rejeitada"", u""Rejeitado"", u""Remover"", u""Renomeação feita"", u""Renomeação negada"", u""Reprovado"", u""Reticência"", u""Sem relação"", u""Solução intermediária"", u""Sorriso"", u""Sugestão"", u""Suspenso"", u""Suspensão"", u""Susto"", u""T+"", u""Trabalhando nisso"", u""Travesso"", u""Triste"", u""Ups"", u""Vergonha"", u""Votos a favor"", u""WU Concluído"", u""WU Não concluído"", u""Wma"", u""Wmfx"", u""Wmfx2"", u""Wmv"", u""Wmw"", u""Wmw1"", u""Wmwb"", u""Wmwc"", u""Wmwl"", u""Wmwm"", u""Wmwp"", u""Wmwrx"", u""Wmws"", u""X"", u""XD"", u""XP"", u""ZZ"", u""^..^"", u""^^"", u""^o^""]
#becomes plaintext in escape for regexp strings
#from phenny bot irc.py module
def standardize(string):
	for char in '^$[].|?+*{}()/=:;-':
		if not char in string: continue
		string = string.replace(char, '\\' + char)
	return string
	
def main():
	for pred in predefs:
		site=pywikibot.Site('pt','wikipedia')
		p=u"template:%s" % pred
		sp=pywikibot.Page(site,p)
		
		gen = pagegenerators.ReferringPageGenerator(sp,followRedirects=True,onlyTemplateInclusion=True)
		gen = pagegenerators.NamespaceFilterPageGenerator(gen,[3])
		preloadingGen = pagegenerators.PreloadingGenerator(gen, step = 50)
		
		excludelist = [u"Usuário(a) Discussão:Kleiner"]
		for paget in preloadingGen:
			pywikibot.output(paget.title())
			if not paget.title() in excludelist:
				try:
					text = paget.get()
					pywikibot.output(paget.title())
					preds = text
					for pred in predefs:
						predrx = standardize(pred)
						regex = ("\{\{%s(?=\||\}\})" % predrx )
						regex2 = (u"\{\{predefinição\:%s(?=\||\}\})" % predrx)
						rpred = re.compile(regex, re.I)
						preds = re.sub(rpred, u'{{Subst:%s' % pred, preds, re.I)
						preds = re.sub(re.compile(regex2, re.I), u'{{Subst:%s' % pred, preds, re.I)
						#return preds
												
					if text != preds:
						pywikibot.output(u"\n\n>>> \03{lightpurple}%s\03 <<<" % pywikibot.showDiff(text,preds))
						try:
							paget.put(preds, u'[[WP:BOT|BOT]]: Aplicando Subst em predefinições')
							pywikibot.output(u"Edição gravada")
						except pywikibot.LockedPage:
							pywikibot.output(u"----------> %s : Página protegida" % paget.title())
						except Exception as e:
							pywikibot.output(str(e))
							pywikibot.output(u"Erro")
						except:
							pywikibot.output(u"Erro qqr")
										
					else:
						pywikibot.output(u"Nothing to change here, skipping")
				except pywikibot.Error:
					pass
				excludelist.append(paget.title())

if __name__ == "__main__":
	try:
		main()
	finally:
		pywikibot.stopme()
